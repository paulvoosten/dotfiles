#!/bin/bash
case "${HOSTNAME}" in
    'arch-home') bspc monitor -d web term code data chat music game vm rand;;
    'arch-adcalls')
        bspc monitor VGA-1 -d web data chat music
        bspc monitor HDMI-1 -d code term game vm rand
        ;;
esac

bspc config border_width 2
bspc config window_gap 10
bspc config top_padding 0
bspc config right_padding 0
bspc config bottom_padding 0
bspc config left_padding 0

bspc config active_border_color $(xrdb -query|grep 'color5:'|cut -f2)
bspc config focused_border_color $(xrdb -query|grep 'color1:'|cut -f2)
bspc config normal_border_color $(xrdb -query|grep 'color0:'|cut -f2)
bspc config presel_feedback_color $(xrdb -query|grep 'color2:'|cut -f2)

bspc config click_to_focus true
bspc config split_ratio 0.5

bspc rule -a Chromium desktop='web'
bspc rule -a qutebrowser desktop='web'
bspc rule -a Firefox desktop='web'
bspc rule -a discord desktop='web'
bspc rule -a Termite desktop='term'
bspc rule -a Subl3 desktop='code'
bspc rule -a jetbrains-phpstorm desktop='code'
bspc rule -a DBeaver desktop='data'
bspc rule -a Postman desktop='data'
bspc rule -a discord desktop='chat'
bspc rule -a Slack desktop='chat'
bspc rule -a Spotify desktop='music'
bspc rule -a Steam desktop='game'
bspc rule -a csgo_linux64 desktop='game' state=fullscreen
bspc rule -a Virt-manager desktop='vm'
bspc rule -a KeePass2 state=floating
bspc rule -a scratchpad state=floating hidden=on sticky=on

wmname LG3D &

if ! pgrep -x compton; then
    compton -b &
fi

feh --bg-fill --no-fehbg ~/.background &

if ! pgrep -x caffeine; then
    caffeine &
fi

if ! pgrep -x redshift; then
    redshift &
fi

if ! pgrep -x sxhkd; then
    sxhkd &
else
    pkill -USR1 -x sxhkd &
fi

~/.config/polybar/launch.sh &

if [ ! -f /tmp/scratchid ]; then
    termite --class scratchpad -t scratchpad -e ~/.config/bspwm/scratch &
fi
